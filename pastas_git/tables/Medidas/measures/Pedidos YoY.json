{
  "name": "Pedidos YoY",
  "expression": [
    "",
    "VAR UltimaData = ",
    "CALCULATE(",
    "    MAX(fVendas[datekey]),",
    "    REMOVEFILTERS(dCalendario)",
    ")",
    "",
    "VAR UltimaDataReal =",
    "DATE(",
    "    INT(UltimaData / 10000),                            -- Ano",
    "    INT(MOD(UltimaData, 10000) / 100),                  -- MÃªs",
    "    MOD(UltimaData, 100)                                -- Dia",
    ")",
    "",
    "VAR DataLimite =",
    "EDATE(UltimaDataReal, -12)",
    "",
    "VAR YoY =",
    "CALCULATE(",
    "    [Pedidos],",
    "    DATEADD(dCalendario[Data], -12,MONTH),",
    "    FILTER(",
    "        ALL(dCalendario), dCalendario[Data] <= DataLimite",
    "    )",
    ")",
    "",
    "RETURN",
    "YoY"
  ],
  "formatString": "#,0",
  "displayFolder": "Inteligencia_temporal",
  "lineageTag": "91aac8df-f0ac-4fb1-a48f-fd901f091cc2"
}